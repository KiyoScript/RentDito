<tr>
  <td><%= charge.user.tenant.room.name %></td>
  <td><%= charge.user.fullname %></td>
  <td><%= charge.user.phone_number %></td>
  <td> ₱  <%= charge.extra_charge_amount %></td>
  <td> ₱  <%= charge.electricity_share_amount %></td>
  <td> ₱  <%= charge.water_share_amount %></td>
  <td> ₱  <%= charge.wifi_share_amount %></td>
  <td> ₱  <%= charge.monthly_rental_amount %></td>
  <td> ₱  <%= charge.total_amount %></td>

  <td> <%= ChargePenaltyCalculation.new(charge.billing.due_date, charge.total_amount).total_with_penalty if (charge.unpaid? || charge.pending?) && (charge.billing.due_date < Date.today) %></td>

  <% if current_user.landlord? || current_user.admin? %>
    <td> ₱  <%= charge.paid_amount %></td>
    <td> <%= charge_status_badge(charge.status) %></td>
  <% end %>

  <td> <%= charge.days_count %></td>
  <% if current_user.landlord? || current_user.admin? %>
    <td>
      <a href="javascript:void(0)" class="menu-link text-center" data-bs-toggle="modal" data-bs-target="#updateChargesModal-<%= dom_id(charge) %>">
        <i class='bx bx-edit bx-sm'></i>
        Edit
      </a>
    </td>
  <% end %>
</tr>

<div class="modal fade" id="updateChargesModal-<%= dom_id(charge)%>" tabindex="-1" aria-labelledby="updateChargesModalLabel" aria-hidden="true" data-controller="billing-charges" data-action="turbo:submit-end->billing-charges#hideModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="updateChargesModalLabel"><%= charge.user.fullname %></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <%= turbo_frame_tag :edit_billing_charges_frame, src: edit_dashboard_billing_charge_path(charge.billing, charge) %>
    </div>
  </div>
</div>


